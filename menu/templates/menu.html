{% extends 'cal_base.html' %}

{% block content %}

<div id="calendar_wrapper">
	<div id="calendar-header">
	<h1>Menu</h1>
	</div>

	<table>

	{% for key, value in items_by_cat.items %}
		<td>
		<tr><h2>{{ key }}</h2></tr>

		{% for item in value %}

		<tr><h3>{{ item.item.name }}</h3>

		<form role="form" method="post" action="/menu/">
			{% csrf_token %}
			<input type="hidden" name="item_id" value="{{ item.item.id }}">
			<input type="hidden" name="entry_id" value="{{ entry_id }}">
			<input type="submit" name="submit" value="Add to Cart">
		</form></tr>

		{% endfor %}
		</td>
	{% endfor %}
	</table>
	</div>



<h1>In Your Cart</h1>
<table border='1'>
	<tr>
		<td>Item</td>
		<td>Quantity</td>
	</tr>
{% for key, value in items_with_quantity.items %}
	<tr>
		<td>{{ key }}</td>
		<td>{{ value }}</td>
	</td>
{% endfor %}
</table>

<div id="calendar_wrapper">
	<div id="calendar-header">
		<h2>PICK A TIME</h2>
		<div id="alert">
		<h3>{{ message }}</h3>
		</div>
	</div>
	<table cellspacing="8" cellpadding="8">
		<tr>
			{% for day in day_list %}
			<td>
				<div class="cal_box">
					<div class="cal_box_weekday">{{ day.0 }}</div>
					<div class="cal_box_date">{{ day.1 }}</div>
				</div>
				<hr>
	
			</td>		
			{% endfor %}
		</tr>

		<tr>
			{% for day in days %}
			<td>
				{% for deliv in day %}
					{% if deliv.open and deliv.orders_still_open %}
					<div class="cal_box">

					<a href="/cal/{{ deliv.id }}">{{ deliv.get_start_time_string }} - {{ deliv.get_end_time_string }}</a>

					</form>
					</div>
					
					{% else %}
					<div class="cal_box_taken">

						{{ deliv.get_start_time_string }} - {{ deliv.get_end_time_string }}
					
					</div>
					{% endif %}

				<hr>
				{% endfor %}

			</td>
			{% endfor %}

	</table>
</div>

{% endblock %}